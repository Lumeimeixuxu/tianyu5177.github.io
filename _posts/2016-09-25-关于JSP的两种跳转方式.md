---
layout: post
title: "web请求的服务器跳转和客户端跳转"
date: 2016-09-25 
description: "JSP，JavaWeb，页面跳转"
tag: JSP技术 
---   

## 概要：
&emsp;&emsp;最近正在过一些web基础知识，就随手总结一下，本文简单梳理和总结一下关于web中两种跳转方式的原理和区别，以及以JSP标签和java代码为例的具体实现方式。
 

## 两种方式的特点：


### **1.服务器端跳转：**
**1.1 基本流程**：

&emsp;&emsp;客户端发送一个请求，请求一个服务器资源，如JSP和Servlet等，这个资源又将请求转到服务器的另一个资源，然后再给客户端发送一个响应，也就是说服务器端跳转是客户端发送1次请求，服务器端给出1次响应，由于是服务器内部的跳转，在客户端的表现是透明的，所以地址栏是不改变的。
 
**1.2 特点**：
  
> **特点1：****1次**请求，**1次**回应。  
> **特点2：**地址栏的路径不会被改变。  
> **特点3：**对于**JSP**内置的**request对象**在跳转后，属性**可用**。

   <br/>
 **1.3 常见实现方式：**  

1.用jsp标签：

	<jsp:forward page="目标地址"/>	

	<!-- 这里需要说明的是：<jsp:forward>,属于无条件跳转，但是它只能在容器内跳转，例如你不能指向百度。并且当页面中存在<jsp:forward>标签时，本页面代码不再执行，直接强制跳转，所以要确保你使用此标签前，已经释放了应该释放的资源，例如数据库连接等等。-->

2.在JSP中使用java：
	
	request.getRequestDispatcher("目标地址").forward(request, response); //我们常说的“转发”，同样只能在容器内跳转。



### **2.客户端跳转：**
**2.1 基本流程**：

&emsp;&emsp;客户端同样是发送一个请求给服务器端资源，这个服务器资源会首先给客户端一个响应，客户端再根据这个响应当中所包含的地址，再次向服务器端发送一个请求，也就是说客户端跳转是2次请求，2次响应。

**2.2 特点**：
     
 > **特点1：****2次**请求，**2次**响应。  
 > **特点2：**地址栏的路径会改变。  
 > **特点3：**对于**JSP**内置的**request对象**在跳转后，属性**不可用**。

<br/>
**2.3 常见实现方式：**

1.靠一些html标签（当然也可以是其他的html标签，以**&lt;a&gt;**标签举例）：
	
	<a href ="目标地址"></a>
	  
2.在JSP中使用java：
	
	response.sendRedirect("目标地址"); //我们常说的“重定向”
	
	//这里需要说明的是：sendREdirect可以任意跳转，例如直接指向百度也是可以的，但是要用有http://协议头。

	

## 图示理解
&emsp;&emsp;为了能更好的理解并记住这两种方式，我们通过下面两个例子进行理解，本人的经验和技术都有限，所以不知道例子是否恰当，但是希望可以帮助大家理解：

**我们先看服务器跳转：**
![服务器跳转图示](http://oi5hiw2r7.bkt.clouddn.com//blog/img/a.jpg?imageMogr2/thumbnail/700x500>/blur/1x0/quality/100)

**在服务器跳转中（如上图）：**

> 1.客户去银行窗口咨询一项理财服务（相当于客户端的1次请求）。

> 2.银行窗口的员工发现自己不清楚这个理财产品，电话询问了主管，主管告诉了她相关信息。（相当于服务器内部进行了跳转）。

> 3.窗口员工把理财产品信息告诉了客户（客户收到了服务器的1次响应）。

**注意在整个过程中：**

客户相当于客户端，主管和办事窗口相当于服务器。这个过程中客户端发了**1**次请求，得到**1**次回应。办事窗口与主管之间是可以互通消息的，相当于客户端与服务器之间在这种跳转中request对象等是可以用的；客户在这个过程中并不知道办事窗口员工给主管打了电话，只知道窗口告诉了他最终结果，相当于客户端浏览器的地址没有任何变化，但是返回的内容是经过服务器内部跳转之后的。

---

**再看客户端跳转：**

![服务器跳转图示](http://oi5hiw2r7.bkt.clouddn.com//blog/img/b.jpg?imageMogr2/thumbnail/700x500>/blur/1x0/quality/100)

**在客户端跳转中（如上图）：**

> 1.客户去银行窗口咨询一项理财服务（相当于客户端的一次请求）。

> 2.银行窗口的员工发现自己不清楚这个理财产品，并告知客户去隔壁的主管窗口办理。（相当于客户端得到了一次服务器的响应，内容为：“去找主管”。）

> 3.客户去隔壁的窗口找主管咨询，因为主管不知道客户要咨询什么，所以客户再次说明自己要咨询的理财产品。（相当于客户端再次发起请求，但是请求中的request属性都不再可用），客户此时换了座位，坐在了主管窗口。（相当于浏览器的地址发生改变，因为这是客户端自己发出的请求。）

> 4.主管告诉了客户相关信息（相当于客户端再次得到一次响应）。

**注意在整个过程中：**

&emsp;&emsp;客户同样相当于客户端，主管和办事窗口相当于服务器。这个过程中客户端发了**2**次请求，得到**2**次回应。并且办事窗口与主管之间是**不可以**互通消息的，客户和办事窗口说了什么，主管完全不知道，客户只能完全再复述一遍才可以继续沟通，相当于客户端与服务器之间在这种跳转中request对象等是**不可用**的；因为客户自己去的主管窗口，所以客户的位置发生了改变，相当于浏览器的地址发生了改变。

希望能对看到总结的小伙伴有一些帮助。




